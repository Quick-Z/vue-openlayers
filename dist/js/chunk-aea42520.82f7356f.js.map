{"version":3,"sources":["webpack:///./src/views/drawGraph/drawGraph.vue?13a0","webpack:///src/views/drawGraph/drawGraph.vue","webpack:///./src/views/drawGraph/drawGraph.vue?19ed","webpack:///./src/views/drawGraph/drawGraph.vue","webpack:///./node_modules/core-js/internals/create-property.js","webpack:///./node_modules/core-js/modules/es.array.slice.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","directives","name","rawName","value","expression","attrs","on","$event","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","tool","multiple","_l","item","key","domProps","_s","label","ref","staticRenderFns","data","tools","draw","source","wrapX","watch","addInteraction","methods","initMap","OSM","Map","$refs","layers","raster","vector","view","View","projection","center","zoom","removeInteraction","geometryFunction","Draw","type","mounted","component","toPropertyKey","definePropertyModule","createPropertyDescriptor","module","exports","object","propertyKey","f","$","isObject","isArray","toAbsoluteIndex","toLength","toIndexedObject","createProperty","wellKnownSymbol","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","SPECIES","nativeSlice","slice","max","Math","proto","forced","start","end","Constructor","result","n","O","length","k","fin","undefined","constructor"],"mappings":"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","file":"js/chunk-aea42520.82f7356f.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vm\"},[_c('h2',{staticClass:\"h-title\"},[_vm._v(\"绘制图形\")]),_c('div',{staticClass:\"tools-x\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tool),expression:\"tool\"}],attrs:{\"id\":\"type\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.tool=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.tools),function(item){return _c('option',{key:item.value,domProps:{\"value\":item.value}},[_vm._v(_vm._s(item.label))])}),0)]),_c('div',{ref:\"map\",staticClass:\"map-x\"})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"vm\">\r\n    <h2 class=\"h-title\">绘制图形</h2>\r\n    <div class=\"tools-x\">\r\n      <select id=\"type\" v-model=\"tool\">\r\n        <option v-for=\"item in tools\" :key=\"item.value\" :value=\"item.value\">{{item.label}}</option>\r\n      </select>\r\n    </div>\r\n    <div ref=\"map\" class=\"map-x\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport 'ol/ol.css'\r\nimport { Map, View } from 'ol'\r\nimport Tile from 'ol/layer/Tile'\r\nimport OSM from 'ol/source/OSM'\r\nimport LayerVector from 'ol/layer/Vector'\r\nimport SourceVector from 'ol/source/Vector'\r\nimport Draw, {createRegularPolygon, createBox} from 'ol/interaction/Draw'\r\nimport Polygon from 'ol/geom/Polygon'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      tool: 'Circle', // 当前选中的工具\r\n      tools: [ // 工具集\r\n        {\r\n          value: 'Circle',\r\n          label: '圆'\r\n        },\r\n        {\r\n          value: 'Square',\r\n          label: '方形'\r\n        },\r\n        {\r\n          value: 'Rectangle',\r\n          label: '矩形'\r\n        },\r\n        {\r\n          value: 'Hexagram',\r\n          label: '六芒星'\r\n        },\r\n        {\r\n          value: 'None',\r\n          label: '无'\r\n        }\r\n      ],\r\n      map: null, // 地图\r\n      draw: null,\r\n      source: new SourceVector({\r\n        wrapX: false // 禁止横向无限重复（底图渲染的时候会横向无限重复），设置了这个属性，可以让绘制的图形不跟随底图横向无限重复\r\n      })\r\n    }\r\n  },\r\n  watch: {\r\n    tool(newVal) {\r\n      this.addInteraction()\r\n    }\r\n  },\r\n  methods: {\r\n    initMap() {\r\n      let raster = new Tile({\r\n        source: new OSM()\r\n      });\r\n\r\n      let vector = new LayerVector({\r\n        source: this.source\r\n      });\r\n      this.map = new Map({\r\n        target: this.$refs.map,\r\n        layers: [raster, vector],\r\n        view: new View({\r\n          projection: \"EPSG:4326\",\r\n          center: [113.1206, 23.034996],\r\n          zoom: 10\r\n        })\r\n      })\r\n      this.addInteraction()\r\n    },\r\n    addInteraction() {\r\n      if (this.draw !== null) {\r\n        this.map.removeInteraction(this.draw)\r\n      }\r\n      if (this.tool !== 'None') {\r\n        let geometryFunction\r\n        let type = 'Circle'\r\n        \r\n        if (this.tool === 'Square') {\r\n          // 方形\r\n          geometryFunction = createRegularPolygon(4)\r\n        } else if (this.tool === 'Rectangle') {\r\n          // 矩形\r\n          geometryFunction = createBox()\r\n        } else if (this.tool === 'Hexagram') {\r\n          geometryFunction = function (coordinates, geometry) {\r\n            //中心点\r\n\t\t\t\t\t\tvar center = coordinates[0];\r\n\t\t\t\t\t\t//鼠标点击的另一个点\r\n\t\t\t\t\t\tvar last = coordinates[1];\r\n\t\t\t\t\t\tvar dx = center[0] - last[0];\r\n\t\t\t\t\t\tvar dy = center[1] - last[1];\r\n\t\t\t\t\t\t//半径\r\n\t\t\t\t\t\tvar radius = Math.sqrt(dx * dx + dy * dy);\r\n\t\t\t\t\t\t//旋转的角度\r\n\t\t\t\t\t\tvar rotation = Math.atan2(dy, dx);\r\n\t\t\t\t\t\t//用来记录顶点坐标的数组\r\n\t\t\t\t\t\tvar newCoordinates = [];\r\n\t\t\t\t\t\t//顶点个数\r\n\t\t\t\t\t\tvar numPoints = 12;\r\n\t\t\t\t\t\tfor (var i = 0; i < numPoints; ++i) {\r\n\t\t\t\t\t\t\t//顶点相对转过的角度\r\n\t\t\t\t\t\t\tvar angle = rotation + i * 2 * Math.PI / numPoints;\r\n\t\t\t\t\t\t\t//确定凸顶点和凹顶点\r\n\t\t\t\t\t\t\tvar fraction = i % 2 === 0 ? 1 : 0.58;\r\n\t\t\t\t\t\t\t//计算顶点的坐标\r\n\t\t\t\t\t\t\tvar offsetX = radius * fraction * Math.cos(angle);\r\n\t\t\t\t\t\t\tvar offsetY = radius * fraction * Math.sin(angle);\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tnewCoordinates.push([center[0] + offsetX, center[1] + offsetY]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnewCoordinates.push(newCoordinates[0].slice());\r\n\t\t\t\t\t\tif (!geometry) {\r\n\t\t\t\t\t\t\tgeometry = new Polygon([newCoordinates]);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tgeometry.setCoordinates([newCoordinates]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn geometry;\r\n          }\r\n        }\r\n\r\n        this.draw = new Draw({\r\n          source: this.source,\r\n          type,\r\n          geometryFunction\r\n        })\r\n        this.map.addInteraction(this.draw)\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initMap()\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./drawGraph.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./drawGraph.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./drawGraph.vue?vue&type=template&id=950dc4ec&\"\nimport script from \"./drawGraph.vue?vue&type=script&lang=js&\"\nexport * from \"./drawGraph.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar toPropertyKey = require('../internals/to-property-key');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPropertyKey(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toLength = require('../internals/to-length');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar createProperty = require('../internals/create-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('slice');\n\nvar SPECIES = wellKnownSymbol('species');\nvar nativeSlice = [].slice;\nvar max = Math.max;\n\n// `Array.prototype.slice` method\n// https://tc39.es/ecma262/#sec-array.prototype.slice\n// fallback for not array-like ES3 strings and DOM objects\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  slice: function slice(start, end) {\n    var O = toIndexedObject(this);\n    var length = toLength(O.length);\n    var k = toAbsoluteIndex(start, length);\n    var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n    // inline `ArraySpeciesCreate` for usage native `Array#slice` where it's possible\n    var Constructor, result, n;\n    if (isArray(O)) {\n      Constructor = O.constructor;\n      // cross-realm fallback\n      if (typeof Constructor == 'function' && (Constructor === Array || isArray(Constructor.prototype))) {\n        Constructor = undefined;\n      } else if (isObject(Constructor)) {\n        Constructor = Constructor[SPECIES];\n        if (Constructor === null) Constructor = undefined;\n      }\n      if (Constructor === Array || Constructor === undefined) {\n        return nativeSlice.call(O, k, fin);\n      }\n    }\n    result = new (Constructor === undefined ? Array : Constructor)(max(fin - k, 0));\n    for (n = 0; k < fin; k++, n++) if (k in O) createProperty(result, n, O[k]);\n    result.length = n;\n    return result;\n  }\n});\n"],"sourceRoot":""}