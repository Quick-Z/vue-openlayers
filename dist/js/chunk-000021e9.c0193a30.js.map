{"version":3,"sources":["webpack:///./src/views/scaleLine/ScaleLine.vue?6c87","webpack:///src/views/scaleLine/ScaleLine.vue","webpack:///./src/views/scaleLine/ScaleLine.vue?ca79","webpack:///./src/views/scaleLine/ScaleLine.vue","webpack:///./node_modules/core-js/modules/es.array.find.js","webpack:///./node_modules/ol/control/ScaleLine.js","webpack:///./node_modules/ol/source/BingMaps.js","webpack:///./node_modules/ol/net.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","directives","name","rawName","value","expression","attrs","on","$event","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","scaleplate","multiple","_l","item","key","v","_s","t","staticRenderFns","data","scaleLineControl","scaleplateList","watch","setScaleLine","methods","initMap","Map","controls","control","layers","view","View","projection","center","zoom","setUnits","unit","mounted","component","$","$find","find","addToUnscopables","FIND","SKIPS_HOLES","proto","forced","callbackfn","arguments","length","undefined","__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","p","hasOwnProperty","TypeError","String","__","constructor","create","UNITS_PROP","Units","DEGREES","IMPERIAL","NAUTICAL","METRIC","US","LEADING_DIGITS","DEFAULT_DPI","ScaleLine","_super","opt_options","_this","className","bar","element","document","createElement","once","un","innerElement_","appendChild","viewState_","minWidth_","minWidth","renderedVisible_","renderedWidth_","renderedHTML_","addChangeListener","handleUnitsChanged_","units","scaleBar_","scaleBarSteps_","steps","scaleBarText_","text","dpi_","dpi","getUnits","get","updateElement_","set","setDpi","viewState","pointResolutionUnits","METERS","pointResolution","resolution","nominalCount","suffix","metersPerDegree","count","width","decimalCount","html","i","Math","floor","log","decimal","pow","round","isNaN","style","display","createScaleBar","toFixed","innerHTML","scale","scaleBarText","mapScale","getScaleForResolution","toLocaleString","scaleSteps","stepWidth","backgroundColor","push","createMarker","createStepText","container","join","position","top","isLast","lengthString","margin","mpu","getMetersPerUnit","inchesPerMeter","parseFloat","toString","mapEvent","frameState","quadKey","tileCoord","charCode","z","digits","mask","fromCharCode","TOS_ATTRIBUTION","BingMaps","hidpi","cacheSize","crossOrigin","imageSmoothing","opaque","reprojectionErrorThreshold","state","LOADING","tileLoadFunction","tilePixelRatio","wrapX","transition","zDirection","hidpi_","culture_","culture","maxZoom_","maxZoom","apiKey_","imagerySet_","imagerySet","url","handleImageryMetadataResponse","bind","getApiKey","getImagerySet","response","statusCode","statusDescription","authenticationResultCode","resourceSets","resources","resource","zoomMax","sourceProjection","getProjection","extent","tileSize","imageWidth","imageHeight","tileGrid","minZoom","zoomMin","tileUrlFunction","imageUrlSubdomains","subdomain","quadKeyTileCoord","imageUrl","replace","pixelRatio","imageryProviders","transform_1","setAttributions","attributions","getTileGrid","getZForResolution","getTileCoordForCoordAndZ","imageryProvider","intersecting","coverageAreas","ii","coverageArea","bbox","epsg4326Extent","extent_1","attribution","setState","READY","ERROR","jsonp","callback","opt_errback","opt_callbackParam","script","cleanup","window","parentNode","removeChild","async","src","indexOf","timer","setTimeout","clearTimeout","getElementsByTagName","ResponseError","message","status","Error","ClientError","client"],"mappings":"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","file":"js/chunk-000021e9.c0193a30.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vm\"},[_c('h2',{staticClass:\"h-title\"},[_vm._v(\"比例尺控件 ScaleLine\")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.scaleplate),expression:\"scaleplate\"}],attrs:{\"id\":\"units\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.scaleplate=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.scaleplateList),function(item){return _c('option',{key:item.v},[_vm._v(_vm._s(item.t))])}),0),_c('div',{staticClass:\"map-x\",attrs:{\"id\":\"map\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"vm\">\r\n    <h2 class=\"h-title\">比例尺控件 ScaleLine</h2>\r\n\r\n    <select id=\"units\" v-model=\"scaleplate\">\r\n      <option v-for=\"item in scaleplateList\" :key=\"item.v\">{{item.t}}</option>\r\n    </select>\r\n    \r\n    <div id=\"map\" class=\"map-x\"></div>\r\n    \r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport 'ol/ol.css'\r\nimport { Map, View } from 'ol'\r\nimport Tile from 'ol/layer/Tile'\r\nimport BingMaps from 'ol/source/BingMaps'\r\nimport * as control from 'ol/control'\r\n\r\nexport default {\r\n  name: 'ScaleLine',\r\n  data () {\r\n    return {\r\n      map: null,\r\n      scaleLineControl: new control.ScaleLine(),\r\n      scaleplate: '度',\r\n      scaleplateList: [\r\n        {\r\n          t: '度',\r\n          v: 'degrees'\r\n        },\r\n        {\r\n          t: '英制英尺',\r\n          v: 'imperial'\r\n        },\r\n        {\r\n          t: '美制英尺',\r\n          v: 'us'\r\n        },\r\n        {\r\n          t: '海里',\r\n          v: 'nautical'\r\n        },\r\n        {\r\n          t: '公制',\r\n          v: 'metric'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  watch: {\r\n    // 监听比例尺单位切换\r\n    scaleplate (newVal, oldVal) {\r\n      this.setScaleLine()\r\n    }\r\n  },\r\n  methods: {\r\n    initMap () {\r\n      this.map = new Map({\r\n        target: 'map',\r\n        // 添加控件\r\n        controls: control.defaults().extend([\r\n          this.scaleLineControl // 比例尺\r\n        ]),\r\n        layers: [\r\n          new Tile({\r\n            source: new BingMaps({\r\n              key: 'AiZrfxUNMRpOOlCpcMkBPxMUSKOEzqGeJTcVKUrXBsUdQDXutUBFN3-GnMNSlso-',\r\n              imagerySet: 'Aerial'\r\n            })\r\n          })\r\n        ],\r\n        view: new View({\r\n          projection: \"EPSG:4326\", // 坐标系，有EPSG:4326和EPSG:3857\r\n          center: [114.064839, 22.548857],\r\n          zoom: 6 // 地图缩放级别（打开页面时默认级别）\r\n        })\r\n      })\r\n      this.setScaleLine() // 设置比例尺单位\r\n    },\r\n    setScaleLine () { // 设置比例尺单位\r\n      // 从列表里找到当前单位\r\n      let unit = this.scaleplateList.find(item => {\r\n        return item.t === this.scaleplate\r\n      })\r\n      // 设置单位，注意unit.v的值，必须使用这些值\r\n      this.scaleLineControl.setUnits(unit.v)\r\n    }\r\n  },\r\n  mounted () {\r\n    this.initMap()\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScaleLine.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ScaleLine.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ScaleLine.vue?vue&type=template&id=04be287a&\"\nimport script from \"./ScaleLine.vue?vue&type=script&lang=js&\"\nexport * from \"./ScaleLine.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.es/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/control/ScaleLine\n */\nimport Control from './Control.js';\nimport ProjUnits from '../proj/Units.js';\nimport { CLASS_UNSELECTABLE } from '../css.js';\nimport { METERS_PER_UNIT, getPointResolution } from '../proj.js';\nimport { assert } from '../asserts.js';\n/**\n * @type {string}\n */\nvar UNITS_PROP = 'units';\n/**\n * Units for the scale line. Supported values are `'degrees'`, `'imperial'`,\n * `'nautical'`, `'metric'`, `'us'`.\n * @enum {string}\n */\nexport var Units = {\n    DEGREES: 'degrees',\n    IMPERIAL: 'imperial',\n    NAUTICAL: 'nautical',\n    METRIC: 'metric',\n    US: 'us',\n};\n/**\n * @const\n * @type {Array<number>}\n */\nvar LEADING_DIGITS = [1, 2, 5];\n/**\n * @const\n * @type {number}\n */\nvar DEFAULT_DPI = 25.4 / 0.28;\n/***\n * @template Return\n * @typedef {import(\"../Observable\").OnSignature<import(\"../Observable\").EventTypes, import(\"../events/Event.js\").default, Return> &\n *   import(\"../Observable\").OnSignature<import(\"../ObjectEventType\").Types|\n *     'change:units', import(\"../Object\").ObjectEvent, Return> &\n *   import(\"../Observable\").CombinedOnSignature<import(\"../Observable\").EventTypes|import(\"../ObjectEventType\").Types\n *     |'change:units', Return>} ScaleLineOnSignature\n */\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-scale-line'] CSS Class name.\n * @property {number} [minWidth=64] Minimum width in pixels at the OGC default dpi. The width will be\n * adjusted to match the dpi used.\n * @property {function(import(\"../MapEvent.js\").default):void} [render] Function called when the control\n * should be re-rendered. This is called in a `requestAnimationFrame` callback.\n * @property {HTMLElement|string} [target] Specify a target if you want the control\n * to be rendered outside of the map's viewport.\n * @property {import(\"./ScaleLine.js\").Units|string} [units='metric'] Units.\n * @property {boolean} [bar=false] Render scalebars instead of a line.\n * @property {number} [steps=4] Number of steps the scalebar should use. Use even numbers\n * for best results. Only applies when `bar` is `true`.\n * @property {boolean} [text=false] Render the text scale above of the scalebar. Only applies\n * when `bar` is `true`.\n * @property {number|undefined} [dpi=undefined] dpi of output device such as printer. Only applies\n * when `bar` is `true`. If undefined the OGC default screen pixel size of 0.28mm will be assumed.\n */\n/**\n * @classdesc\n * A control displaying rough y-axis distances, calculated for the center of the\n * viewport. For conformal projections (e.g. EPSG:3857, the default view\n * projection in OpenLayers), the scale is valid for all directions.\n * No scale line will be shown when the y-axis distance of a pixel at the\n * viewport center cannot be calculated in the view projection.\n * By default the scale line will show in the bottom left portion of the map,\n * but this can be changed by using the css selector `.ol-scale-line`.\n * When specifying `bar` as `true`, a scalebar will be rendered instead\n * of a scaleline.\n *\n * @api\n */\nvar ScaleLine = /** @class */ (function (_super) {\n    __extends(ScaleLine, _super);\n    /**\n     * @param {Options} [opt_options] Scale line options.\n     */\n    function ScaleLine(opt_options) {\n        var _this = this;\n        var options = opt_options ? opt_options : {};\n        var className = options.className !== undefined\n            ? options.className\n            : options.bar\n                ? 'ol-scale-bar'\n                : 'ol-scale-line';\n        _this = _super.call(this, {\n            element: document.createElement('div'),\n            render: options.render,\n            target: options.target,\n        }) || this;\n        /***\n         * @type {ScaleLineOnSignature<import(\"../Observable.js\").OnReturn>}\n         */\n        _this.on;\n        /***\n         * @type {ScaleLineOnSignature<import(\"../Observable.js\").OnReturn>}\n         */\n        _this.once;\n        /***\n         * @type {ScaleLineOnSignature<void>}\n         */\n        _this.un;\n        /**\n         * @private\n         * @type {HTMLElement}\n         */\n        _this.innerElement_ = document.createElement('div');\n        _this.innerElement_.className = className + '-inner';\n        _this.element.className = className + ' ' + CLASS_UNSELECTABLE;\n        _this.element.appendChild(_this.innerElement_);\n        /**\n         * @private\n         * @type {?import(\"../View.js\").State}\n         */\n        _this.viewState_ = null;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.minWidth_ = options.minWidth !== undefined ? options.minWidth : 64;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.renderedVisible_ = false;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.renderedWidth_ = undefined;\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.renderedHTML_ = '';\n        _this.addChangeListener(UNITS_PROP, _this.handleUnitsChanged_);\n        _this.setUnits(options.units || Units.METRIC);\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.scaleBar_ = options.bar || false;\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.scaleBarSteps_ = options.steps || 4;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.scaleBarText_ = options.text || false;\n        /**\n         * @private\n         * @type {number|undefined}\n         */\n        _this.dpi_ = options.dpi || undefined;\n        return _this;\n    }\n    /**\n     * Return the units to use in the scale line.\n     * @return {import(\"./ScaleLine.js\").Units} The units\n     * to use in the scale line.\n     * @observable\n     * @api\n     */\n    ScaleLine.prototype.getUnits = function () {\n        return this.get(UNITS_PROP);\n    };\n    /**\n     * @private\n     */\n    ScaleLine.prototype.handleUnitsChanged_ = function () {\n        this.updateElement_();\n    };\n    /**\n     * Set the units to use in the scale line.\n     * @param {import(\"./ScaleLine.js\").Units} units The units to use in the scale line.\n     * @observable\n     * @api\n     */\n    ScaleLine.prototype.setUnits = function (units) {\n        this.set(UNITS_PROP, units);\n    };\n    /**\n     * Specify the dpi of output device such as printer.\n     * @param {number|undefined} dpi The dpi of output device.\n     * @api\n     */\n    ScaleLine.prototype.setDpi = function (dpi) {\n        this.dpi_ = dpi;\n    };\n    /**\n     * @private\n     */\n    ScaleLine.prototype.updateElement_ = function () {\n        var viewState = this.viewState_;\n        if (!viewState) {\n            if (this.renderedVisible_) {\n                this.element.style.display = 'none';\n                this.renderedVisible_ = false;\n            }\n            return;\n        }\n        var center = viewState.center;\n        var projection = viewState.projection;\n        var units = this.getUnits();\n        var pointResolutionUnits = units == Units.DEGREES ? ProjUnits.DEGREES : ProjUnits.METERS;\n        var pointResolution = getPointResolution(projection, viewState.resolution, center, pointResolutionUnits);\n        var minWidth = (this.minWidth_ * (this.dpi_ || DEFAULT_DPI)) / DEFAULT_DPI;\n        var nominalCount = minWidth * pointResolution;\n        var suffix = '';\n        if (units == Units.DEGREES) {\n            var metersPerDegree = METERS_PER_UNIT[ProjUnits.DEGREES];\n            nominalCount *= metersPerDegree;\n            if (nominalCount < metersPerDegree / 60) {\n                suffix = '\\u2033'; // seconds\n                pointResolution *= 3600;\n            }\n            else if (nominalCount < metersPerDegree) {\n                suffix = '\\u2032'; // minutes\n                pointResolution *= 60;\n            }\n            else {\n                suffix = '\\u00b0'; // degrees\n            }\n        }\n        else if (units == Units.IMPERIAL) {\n            if (nominalCount < 0.9144) {\n                suffix = 'in';\n                pointResolution /= 0.0254;\n            }\n            else if (nominalCount < 1609.344) {\n                suffix = 'ft';\n                pointResolution /= 0.3048;\n            }\n            else {\n                suffix = 'mi';\n                pointResolution /= 1609.344;\n            }\n        }\n        else if (units == Units.NAUTICAL) {\n            pointResolution /= 1852;\n            suffix = 'nm';\n        }\n        else if (units == Units.METRIC) {\n            if (nominalCount < 0.001) {\n                suffix = 'μm';\n                pointResolution *= 1000000;\n            }\n            else if (nominalCount < 1) {\n                suffix = 'mm';\n                pointResolution *= 1000;\n            }\n            else if (nominalCount < 1000) {\n                suffix = 'm';\n            }\n            else {\n                suffix = 'km';\n                pointResolution /= 1000;\n            }\n        }\n        else if (units == Units.US) {\n            if (nominalCount < 0.9144) {\n                suffix = 'in';\n                pointResolution *= 39.37;\n            }\n            else if (nominalCount < 1609.344) {\n                suffix = 'ft';\n                pointResolution /= 0.30480061;\n            }\n            else {\n                suffix = 'mi';\n                pointResolution /= 1609.3472;\n            }\n        }\n        else {\n            assert(false, 33); // Invalid units\n        }\n        var i = 3 * Math.floor(Math.log(minWidth * pointResolution) / Math.log(10));\n        var count, width, decimalCount;\n        while (true) {\n            decimalCount = Math.floor(i / 3);\n            var decimal = Math.pow(10, decimalCount);\n            count = LEADING_DIGITS[((i % 3) + 3) % 3] * decimal;\n            width = Math.round(count / pointResolution);\n            if (isNaN(width)) {\n                this.element.style.display = 'none';\n                this.renderedVisible_ = false;\n                return;\n            }\n            else if (width >= minWidth) {\n                break;\n            }\n            ++i;\n        }\n        var html;\n        if (this.scaleBar_) {\n            html = this.createScaleBar(width, count, suffix);\n        }\n        else {\n            html = count.toFixed(decimalCount < 0 ? -decimalCount : 0) + ' ' + suffix;\n        }\n        if (this.renderedHTML_ != html) {\n            this.innerElement_.innerHTML = html;\n            this.renderedHTML_ = html;\n        }\n        if (this.renderedWidth_ != width) {\n            this.innerElement_.style.width = width + 'px';\n            this.renderedWidth_ = width;\n        }\n        if (!this.renderedVisible_) {\n            this.element.style.display = '';\n            this.renderedVisible_ = true;\n        }\n    };\n    /**\n     * @private\n     * @param {number} width The current width of the scalebar.\n     * @param {number} scale The current scale.\n     * @param {string} suffix The suffix to append to the scale text.\n     * @return {string} The stringified HTML of the scalebar.\n     */\n    ScaleLine.prototype.createScaleBar = function (width, scale, suffix) {\n        var mapScale = '1 : ' + Math.round(this.getScaleForResolution()).toLocaleString();\n        var scaleSteps = [];\n        var stepWidth = width / this.scaleBarSteps_;\n        var backgroundColor = '#ffffff';\n        for (var i = 0; i < this.scaleBarSteps_; i++) {\n            if (i === 0) {\n                // create the first marker at position 0\n                scaleSteps.push(this.createMarker('absolute', i));\n            }\n            scaleSteps.push('<div>' +\n                '<div ' +\n                'class=\"ol-scale-singlebar\" ' +\n                'style=' +\n                '\"width: ' +\n                stepWidth +\n                'px;' +\n                'background-color: ' +\n                backgroundColor +\n                ';\"' +\n                '>' +\n                '</div>' +\n                this.createMarker('relative', i) +\n                /*render text every second step, except when only 2 steps */\n                (i % 2 === 0 || this.scaleBarSteps_ === 2\n                    ? this.createStepText(i, width, false, scale, suffix)\n                    : '') +\n                '</div>');\n            if (i === this.scaleBarSteps_ - 1) {\n                {\n                    /*render text at the end */\n                }\n                scaleSteps.push(this.createStepText(i + 1, width, true, scale, suffix));\n            }\n            // switch colors of steps between black and white\n            if (backgroundColor === '#ffffff') {\n                backgroundColor = '#000000';\n            }\n            else {\n                backgroundColor = '#ffffff';\n            }\n        }\n        var scaleBarText;\n        if (this.scaleBarText_) {\n            scaleBarText =\n                '<div ' +\n                    'class=\"ol-scale-text\" ' +\n                    'style=\"width: ' +\n                    width +\n                    'px;\">' +\n                    mapScale +\n                    '</div>';\n        }\n        else {\n            scaleBarText = '';\n        }\n        var container = '<div ' +\n            'style=\"display: flex;\">' +\n            scaleBarText +\n            scaleSteps.join('') +\n            '</div>';\n        return container;\n    };\n    /**\n     * Creates a marker at given position\n     * @param {string} position The position, absolute or relative\n     * @param {number} i The iterator\n     * @return {string} The stringified div containing the marker\n     */\n    ScaleLine.prototype.createMarker = function (position, i) {\n        var top = position === 'absolute' ? 3 : -10;\n        return ('<div ' +\n            'class=\"ol-scale-step-marker\" ' +\n            'style=\"position: ' +\n            position +\n            ';' +\n            'top: ' +\n            top +\n            'px;\"' +\n            '></div>');\n    };\n    /**\n     * Creates the label for a marker marker at given position\n     * @param {number} i The iterator\n     * @param {number} width The width the scalebar will currently use\n     * @param {boolean} isLast Flag indicating if we add the last step text\n     * @param {number} scale The current scale for the whole scalebar\n     * @param {string} suffix The suffix for the scale\n     * @return {string} The stringified div containing the step text\n     */\n    ScaleLine.prototype.createStepText = function (i, width, isLast, scale, suffix) {\n        var length = i === 0 ? 0 : Math.round((scale / this.scaleBarSteps_) * i * 100) / 100;\n        var lengthString = length + (i === 0 ? '' : ' ' + suffix);\n        var margin = i === 0 ? -3 : (width / this.scaleBarSteps_) * -1;\n        var minWidth = i === 0 ? 0 : (width / this.scaleBarSteps_) * 2;\n        return ('<div ' +\n            'class=\"ol-scale-step-text\" ' +\n            'style=\"' +\n            'margin-left: ' +\n            margin +\n            'px;' +\n            'text-align: ' +\n            (i === 0 ? 'left' : 'center') +\n            '; ' +\n            'min-width: ' +\n            minWidth +\n            'px;' +\n            'left: ' +\n            (isLast ? width + 'px' : 'unset') +\n            ';\"' +\n            '>' +\n            lengthString +\n            '</div>');\n    };\n    /**\n     * Returns the appropriate scale for the given resolution and units.\n     * @return {number} The appropriate scale.\n     */\n    ScaleLine.prototype.getScaleForResolution = function () {\n        var resolution = getPointResolution(this.viewState_.projection, this.viewState_.resolution, this.viewState_.center);\n        var dpi = this.dpi_ || DEFAULT_DPI;\n        var mpu = this.viewState_.projection.getMetersPerUnit();\n        var inchesPerMeter = 1000 / 25.4;\n        return parseFloat(resolution.toString()) * mpu * inchesPerMeter * dpi;\n    };\n    /**\n     * Update the scale line element.\n     * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n     * @override\n     */\n    ScaleLine.prototype.render = function (mapEvent) {\n        var frameState = mapEvent.frameState;\n        if (!frameState) {\n            this.viewState_ = null;\n        }\n        else {\n            this.viewState_ = frameState.viewState;\n        }\n        this.updateElement_();\n    };\n    return ScaleLine;\n}(Control));\nexport default ScaleLine;\n//# sourceMappingURL=ScaleLine.js.map","/**\n * @module ol/source/BingMaps\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport SourceState from './State.js';\nimport TileImage from './TileImage.js';\nimport { applyTransform, intersects } from '../extent.js';\nimport { createFromTileUrlFunctions } from '../tileurlfunction.js';\nimport { createOrUpdate } from '../tilecoord.js';\nimport { createXYZ, extentFromProjection } from '../tilegrid.js';\nimport { get as getProjection, getTransformFromProjections } from '../proj.js';\nimport { jsonp as requestJSONP } from '../net.js';\n/**\n * @param {import('../tilecoord.js').TileCoord} tileCoord Tile coord.\n * @return {string} Quad key.\n */\nexport function quadKey(tileCoord) {\n    var z = tileCoord[0];\n    var digits = new Array(z);\n    var mask = 1 << (z - 1);\n    var i, charCode;\n    for (i = 0; i < z; ++i) {\n        // 48 is charCode for 0 - '0'.charCodeAt(0)\n        charCode = 48;\n        if (tileCoord[1] & mask) {\n            charCode += 1;\n        }\n        if (tileCoord[2] & mask) {\n            charCode += 2;\n        }\n        digits[i] = String.fromCharCode(charCode);\n        mask >>= 1;\n    }\n    return digits.join('');\n}\n/**\n * The attribution containing a link to the Microsoft® Bing™ Maps Platform APIs’\n * Terms Of Use.\n * @const\n * @type {string}\n */\nvar TOS_ATTRIBUTION = '<a class=\"ol-attribution-bing-tos\" ' +\n    'href=\"https://www.microsoft.com/maps/product/terms.html\" target=\"_blank\">' +\n    'Terms of Use</a>';\n/**\n * @typedef {Object} Options\n * @property {number} [cacheSize] Initial tile cache size. Will auto-grow to hold at least the number of tiles in the viewport.\n * @property {boolean} [hidpi=false] If `true` hidpi tiles will be requested.\n * @property {string} [culture='en-us'] Culture code.\n * @property {string} key Bing Maps API key. Get yours at https://www.bingmapsportal.com/.\n * @property {string} imagerySet Type of imagery.\n * @property {boolean} [imageSmoothing=true] Enable image smoothing.\n * @property {number} [maxZoom=21] Max zoom. Default is what's advertized by the BingMaps service.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n * @property {number|import(\"../array.js\").NearestDirectionFunction} [zDirection=0]\n * Choose whether to use tiles with a higher or lower zoom level when between integer\n * zoom levels. See {@link module:ol/tilegrid/TileGrid~TileGrid#getZForResolution}.\n */\n/**\n * @typedef {Object} BingMapsImageryMetadataResponse\n * @property {number} statusCode The response status code\n * @property {string} statusDescription The response status description\n * @property {string} authenticationResultCode The authentication result code\n * @property {Array<ResourceSet>} resourceSets The array of resource sets\n */\n/**\n * @typedef {Object} ResourceSet\n * @property {Array<Resource>} resources Resources.\n */\n/**\n * @typedef {Object} Resource\n * @property {number} imageHeight The image height\n * @property {number} imageWidth The image width\n * @property {number} zoomMin The minimum zoom level\n * @property {number} zoomMax The maximum zoom level\n * @property {string} imageUrl The image URL\n * @property {Array<string>} imageUrlSubdomains The image URL subdomains for rotation\n * @property {Array<ImageryProvider>} [imageryProviders] The array of ImageryProviders\n */\n/**\n * @typedef {Object} ImageryProvider\n * @property {Array<CoverageArea>} coverageAreas The coverage areas\n * @property {string} [attribution] The attribution\n */\n/**\n * @typedef {Object} CoverageArea\n * @property {number} zoomMin The minimum zoom\n * @property {number} zoomMax The maximum zoom\n * @property {Array<number>} bbox The coverage bounding box\n */\n/**\n * @classdesc\n * Layer source for Bing Maps tile data.\n * @api\n */\nvar BingMaps = /** @class */ (function (_super) {\n    __extends(BingMaps, _super);\n    /**\n     * @param {Options} options Bing Maps options.\n     */\n    function BingMaps(options) {\n        var _this = this;\n        var hidpi = options.hidpi !== undefined ? options.hidpi : false;\n        _this = _super.call(this, {\n            cacheSize: options.cacheSize,\n            crossOrigin: 'anonymous',\n            imageSmoothing: options.imageSmoothing,\n            opaque: true,\n            projection: getProjection('EPSG:3857'),\n            reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n            state: SourceState.LOADING,\n            tileLoadFunction: options.tileLoadFunction,\n            tilePixelRatio: hidpi ? 2 : 1,\n            wrapX: options.wrapX !== undefined ? options.wrapX : true,\n            transition: options.transition,\n            zDirection: options.zDirection,\n        }) || this;\n        /**\n         * @private\n         * @type {boolean}\n         */\n        _this.hidpi_ = hidpi;\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.culture_ = options.culture !== undefined ? options.culture : 'en-us';\n        /**\n         * @private\n         * @type {number}\n         */\n        _this.maxZoom_ = options.maxZoom !== undefined ? options.maxZoom : -1;\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.apiKey_ = options.key;\n        /**\n         * @private\n         * @type {string}\n         */\n        _this.imagerySet_ = options.imagerySet;\n        var url = 'https://dev.virtualearth.net/REST/v1/Imagery/Metadata/' +\n            _this.imagerySet_ +\n            '?uriScheme=https&include=ImageryProviders&key=' +\n            _this.apiKey_ +\n            '&c=' +\n            _this.culture_;\n        requestJSONP(url, _this.handleImageryMetadataResponse.bind(_this), undefined, 'jsonp');\n        return _this;\n    }\n    /**\n     * Get the api key used for this source.\n     *\n     * @return {string} The api key.\n     * @api\n     */\n    BingMaps.prototype.getApiKey = function () {\n        return this.apiKey_;\n    };\n    /**\n     * Get the imagery set associated with this source.\n     *\n     * @return {string} The imagery set.\n     * @api\n     */\n    BingMaps.prototype.getImagerySet = function () {\n        return this.imagerySet_;\n    };\n    /**\n     * @param {BingMapsImageryMetadataResponse} response Response.\n     */\n    BingMaps.prototype.handleImageryMetadataResponse = function (response) {\n        if (response.statusCode != 200 ||\n            response.statusDescription != 'OK' ||\n            response.authenticationResultCode != 'ValidCredentials' ||\n            response.resourceSets.length != 1 ||\n            response.resourceSets[0].resources.length != 1) {\n            this.setState(SourceState.ERROR);\n            return;\n        }\n        var resource = response.resourceSets[0].resources[0];\n        var maxZoom = this.maxZoom_ == -1 ? resource.zoomMax : this.maxZoom_;\n        var sourceProjection = this.getProjection();\n        var extent = extentFromProjection(sourceProjection);\n        var scale = this.hidpi_ ? 2 : 1;\n        var tileSize = resource.imageWidth == resource.imageHeight\n            ? resource.imageWidth / scale\n            : [resource.imageWidth / scale, resource.imageHeight / scale];\n        var tileGrid = createXYZ({\n            extent: extent,\n            minZoom: resource.zoomMin,\n            maxZoom: maxZoom,\n            tileSize: tileSize,\n        });\n        this.tileGrid = tileGrid;\n        var culture = this.culture_;\n        var hidpi = this.hidpi_;\n        this.tileUrlFunction = createFromTileUrlFunctions(resource.imageUrlSubdomains.map(function (subdomain) {\n            /** @type {import('../tilecoord.js').TileCoord} */\n            var quadKeyTileCoord = [0, 0, 0];\n            var imageUrl = resource.imageUrl\n                .replace('{subdomain}', subdomain)\n                .replace('{culture}', culture);\n            return (\n            /**\n             * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n             * @param {number} pixelRatio Pixel ratio.\n             * @param {import(\"../proj/Projection.js\").default} projection Projection.\n             * @return {string|undefined} Tile URL.\n             */\n            function (tileCoord, pixelRatio, projection) {\n                if (!tileCoord) {\n                    return undefined;\n                }\n                else {\n                    createOrUpdate(tileCoord[0], tileCoord[1], tileCoord[2], quadKeyTileCoord);\n                    var url = imageUrl;\n                    if (hidpi) {\n                        url += '&dpi=d1&device=mobile';\n                    }\n                    return url.replace('{quadkey}', quadKey(quadKeyTileCoord));\n                }\n            });\n        }));\n        if (resource.imageryProviders) {\n            var transform_1 = getTransformFromProjections(getProjection('EPSG:4326'), this.getProjection());\n            this.setAttributions(function (frameState) {\n                var attributions = [];\n                var viewState = frameState.viewState;\n                var tileGrid = this.getTileGrid();\n                var z = tileGrid.getZForResolution(viewState.resolution, this.zDirection);\n                var tileCoord = tileGrid.getTileCoordForCoordAndZ(viewState.center, z);\n                var zoom = tileCoord[0];\n                resource.imageryProviders.map(function (imageryProvider) {\n                    var intersecting = false;\n                    var coverageAreas = imageryProvider.coverageAreas;\n                    for (var i = 0, ii = coverageAreas.length; i < ii; ++i) {\n                        var coverageArea = coverageAreas[i];\n                        if (zoom >= coverageArea.zoomMin &&\n                            zoom <= coverageArea.zoomMax) {\n                            var bbox = coverageArea.bbox;\n                            var epsg4326Extent = [bbox[1], bbox[0], bbox[3], bbox[2]];\n                            var extent_1 = applyTransform(epsg4326Extent, transform_1);\n                            if (intersects(extent_1, frameState.extent)) {\n                                intersecting = true;\n                                break;\n                            }\n                        }\n                    }\n                    if (intersecting) {\n                        attributions.push(imageryProvider.attribution);\n                    }\n                });\n                attributions.push(TOS_ATTRIBUTION);\n                return attributions;\n            }.bind(this));\n        }\n        this.setState(SourceState.READY);\n    };\n    return BingMaps;\n}(TileImage));\nexport default BingMaps;\n//# sourceMappingURL=BingMaps.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\n/**\n * @module ol/net\n */\nimport { getUid } from './util.js';\n/**\n * Simple JSONP helper. Supports error callbacks and a custom callback param.\n * The error callback will be called when no JSONP is executed after 10 seconds.\n *\n * @param {string} url Request url. A 'callback' query parameter will be\n *     appended.\n * @param {Function} callback Callback on success.\n * @param {Function} [opt_errback] Callback on error.\n * @param {string} [opt_callbackParam] Custom query parameter for the JSONP\n *     callback. Default is 'callback'.\n */\nexport function jsonp(url, callback, opt_errback, opt_callbackParam) {\n    var script = document.createElement('script');\n    var key = 'olc_' + getUid(callback);\n    function cleanup() {\n        delete window[key];\n        script.parentNode.removeChild(script);\n    }\n    script.async = true;\n    script.src =\n        url +\n            (url.indexOf('?') == -1 ? '?' : '&') +\n            (opt_callbackParam || 'callback') +\n            '=' +\n            key;\n    var timer = setTimeout(function () {\n        cleanup();\n        if (opt_errback) {\n            opt_errback();\n        }\n    }, 10000);\n    window[key] = function (data) {\n        clearTimeout(timer);\n        cleanup();\n        callback(data);\n    };\n    document.getElementsByTagName('head')[0].appendChild(script);\n}\nvar ResponseError = /** @class */ (function (_super) {\n    __extends(ResponseError, _super);\n    /**\n     * @param {XMLHttpRequest} response The XHR object.\n     */\n    function ResponseError(response) {\n        var _this = this;\n        var message = 'Unexpected response status: ' + response.status;\n        _this = _super.call(this, message) || this;\n        /**\n         * @type {string}\n         */\n        _this.name = 'ResponseError';\n        /**\n         * @type {XMLHttpRequest}\n         */\n        _this.response = response;\n        return _this;\n    }\n    return ResponseError;\n}(Error));\nexport { ResponseError };\nvar ClientError = /** @class */ (function (_super) {\n    __extends(ClientError, _super);\n    /**\n     * @param {XMLHttpRequest} client The XHR object.\n     */\n    function ClientError(client) {\n        var _this = _super.call(this, 'Failed to issue request') || this;\n        /**\n         * @type {string}\n         */\n        _this.name = 'ClientError';\n        /**\n         * @type {XMLHttpRequest}\n         */\n        _this.client = client;\n        return _this;\n    }\n    return ClientError;\n}(Error));\nexport { ClientError };\n/**\n * @param {string} url The URL.\n * @return {Promise<Object>} A promise that resolves to the JSON response.\n */\nexport function getJSON(url) {\n    return new Promise(function (resolve, reject) {\n        /**\n         * @param {ProgressEvent<XMLHttpRequest>} event The load event.\n         */\n        function onLoad(event) {\n            var client = event.target;\n            // status will be 0 for file:// urls\n            if (!client.status || (client.status >= 200 && client.status < 300)) {\n                var data = void 0;\n                try {\n                    data = JSON.parse(client.responseText);\n                }\n                catch (err) {\n                    var message = 'Error parsing response text as JSON: ' + err.message;\n                    reject(new Error(message));\n                    return;\n                }\n                resolve(data);\n                return;\n            }\n            reject(new ResponseError(client));\n        }\n        /**\n         * @param {ProgressEvent<XMLHttpRequest>} event The error event.\n         */\n        function onError(event) {\n            reject(new ClientError(event.target));\n        }\n        var client = new XMLHttpRequest();\n        client.addEventListener('load', onLoad);\n        client.addEventListener('error', onError);\n        client.open('GET', url);\n        client.setRequestHeader('Accept', 'application/json');\n        client.send();\n    });\n}\n/**\n * @param {string} base The base URL.\n * @param {string} url The potentially relative URL.\n * @return {string} The full URL.\n */\nexport function resolveUrl(base, url) {\n    if (url.indexOf('://') >= 0) {\n        return url;\n    }\n    return new URL(url, base).href;\n}\nvar originalXHR;\nexport function overrideXHR(xhr) {\n    if (typeof XMLHttpRequest !== 'undefined') {\n        originalXHR = XMLHttpRequest;\n    }\n    global.XMLHttpRequest = xhr;\n}\nexport function restoreXHR() {\n    global.XMLHttpRequest = originalXHR;\n}\n//# sourceMappingURL=net.js.map"],"sourceRoot":""}