(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66398e06"],{"0710":function(t,e,n){"use strict";var i=n("e269"),o=n("592d"),s=n("698f"),r=n("cd7e"),a=n("0af5"),p=n("1e8d"),l=n("0999"),c=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),u={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},d=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un,n.options=e,n.id=e.id,n.insertFirst=void 0===e.insertFirst||e.insertFirst,n.stopEvent=void 0===e.stopEvent||e.stopEvent,n.element=document.createElement("div"),n.element.className=void 0!==e.className?e.className:"ol-overlay-container "+r["d"],n.element.style.position="absolute",n.element.style.pointerEvents="auto";var i=e.autoPan;return i&&"object"!==typeof i&&(i={animation:e.autoPanAnimation,margin:e.autoPanMargin}),n.autoPan=i||!1,n.rendered={transform_:"",visible:!0},n.mapPostrenderListenerKey=null,n.addChangeListener(u.ELEMENT,n.handleElementChanged),n.addChangeListener(u.MAP,n.handleMapChanged),n.addChangeListener(u.OFFSET,n.handleOffsetChanged),n.addChangeListener(u.POSITION,n.handlePositionChanged),n.addChangeListener(u.POSITIONING,n.handlePositioningChanged),void 0!==e.element&&n.setElement(e.element),n.setOffset(void 0!==e.offset?e.offset:[0,0]),n.setPositioning(void 0!==e.positioning?e.positioning:s["a"].TOP_LEFT),void 0!==e.position&&n.setPosition(e.position),n}return c(e,t),e.prototype.getElement=function(){return this.get(u.ELEMENT)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(u.MAP)},e.prototype.getOffset=function(){return this.get(u.OFFSET)},e.prototype.getPosition=function(){return this.get(u.POSITION)},e.prototype.getPositioning=function(){return this.get(u.POSITIONING)},e.prototype.handleElementChanged=function(){Object(l["d"])(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Object(l["e"])(this.element),Object(p["c"])(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=Object(p["a"])(t,o["a"].POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(u.ELEMENT,t)},e.prototype.setMap=function(t){this.set(u.MAP,t)},e.prototype.setOffset=function(t){this.set(u.OFFSET,t)},e.prototype.setPosition=function(t){this.set(u.POSITION,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(u.POSITION)){var n=this.getRect(e.getTargetElement(),e.getSize()),i=this.getElement(),o=this.getRect(i,[Object(l["c"])(i),Object(l["b"])(i)]),s=t||{},r=void 0===s.margin?20:s.margin;if(!Object(a["h"])(n,o)){var p=o[0]-n[0],c=n[2]-o[2],d=o[1]-n[1],h=n[3]-o[3],f=[0,0];if(p<0?f[0]=p-r:c<0&&(f[0]=Math.abs(c)+r),d<0?f[1]=d-r:h<0&&(f[1]=Math.abs(h)+r),0!==f[0]||0!==f[1]){var g=e.getView().getCenterInternal(),m=e.getPixelFromCoordinateInternal(g);if(!m)return;var E=[m[0]+f[0],m[1]+f[1]],T=s.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(E),duration:T.duration,easing:T.easing})}}}},e.prototype.getRect=function(t,e){var n=t.getBoundingClientRect(),i=n.left+window.pageXOffset,o=n.top+window.pageYOffset;return[i,o,i+e[0],o+e[1]]},e.prototype.setPositioning=function(t){this.set(u.POSITIONING,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var n=t.getPixelFromCoordinate(e),i=t.getSize();this.updateRenderedPosition(n,i)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var n=this.element.style,i=this.getOffset(),o=this.getPositioning();this.setVisible(!0);var r=Math.round(t[0]+i[0])+"px",a=Math.round(t[1]+i[1])+"px",p="0%",l="0%";o==s["a"].BOTTOM_RIGHT||o==s["a"].CENTER_RIGHT||o==s["a"].TOP_RIGHT?p="-100%":o!=s["a"].BOTTOM_CENTER&&o!=s["a"].CENTER_CENTER&&o!=s["a"].TOP_CENTER||(p="-50%"),o==s["a"].BOTTOM_LEFT||o==s["a"].BOTTOM_CENTER||o==s["a"].BOTTOM_RIGHT?l="-100%":o!=s["a"].CENTER_LEFT&&o!=s["a"].CENTER_CENTER&&o!=s["a"].CENTER_RIGHT||(l="-50%");var c="translate("+p+", "+l+") translate("+r+", "+a+")";this.rendered.transform_!=c&&(this.rendered.transform_=c,n.transform=c,n.msTransform=c)},e.prototype.getOptions=function(){return this.options},e}(i["a"]);e["a"]=d},4859:function(t,e,n){"use strict";n("748d")},"698f":function(t,e,n){"use strict";e["a"]={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"}},"748d":function(t,e,n){},ec3d:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vm"},[n("h2",{staticClass:"h-title"},[t._v("弹窗 popup")]),n("div",{ref:"map",staticClass:"map-x",attrs:{id:"map"}}),n("div",{ref:"HitMap",staticClass:"hit-map"}),n("div",{ref:"popup",staticClass:"popup"},[n("span",{staticClass:"icon-close",on:{click:t.closePopup}},[t._v("✖")]),n("div",{staticClass:"content"},[t._v(t._s(t.currentCoordinate))])]),t._m(0)])},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"explain"},[n("p",[t._v(" overlay：叠加层，即叠加到地图上显示的元素， 关联了一个自定义的HTML元素，由一个单一的地图坐标点确定叠加位置。 与控件类似，但不同的是叠加元素不是在一个固定的屏幕位置上， 而是通过关联一个地图逻辑坐标点跟随地图移动，如标注点、popup等。 ")])])}],s=(n("d81d"),n("5bc0"),n("5eee")),r=n("a2c7"),a=n("480c"),p=n("2ef1"),l=n("0710"),c=n("a568"),u=n("256f"),d={name:"Popup",data:function(){return{map:null,overlay:null,currentCoordinate:""}},methods:{initMap:function(){this.overlay=new l["a"]({element:this.$refs.popup,autoPan:!0,autoPanAnimation:{duration:250}}),this.map=new s["a"]({target:this.$refs.map,layers:[new a["a"]({name:"defaultLayer",source:new p["a"]({url:"http://map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetPurplishBlue/MapServer/tile/{z}/{y}/{x}"})})],overlays:[this.overlay],view:new r["a"]({projection:"EPSG:4326",center:[113.1206,23.034996],zoom:12})}),this.mapClick()},mapClick:function(){var t=this;this.map.on("singleclick",(function(e){var n=e.coordinate,i=Object(c["toStringHDMS"])(Object(u["m"])(n));t.currentCoordinate=i,t.overlay.setPosition(n)}))},closePopup:function(){this.overlay.setPosition(void 0),this.currentCoordinate=null}},mounted:function(){this.initMap()}},h=d,f=(n("4859"),n("2877")),g=Object(f["a"])(h,i,o,!1,null,"2f9cec9f",null);e["default"]=g.exports}}]);
//# sourceMappingURL=chunk-66398e06.f6180a92.js.map