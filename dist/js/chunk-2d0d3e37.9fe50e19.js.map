{"version":3,"sources":["webpack:///./src/views/snapGraph/snapGraph.vue?14bb","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///src/views/snapGraph/snapGraph.vue","webpack:///./src/views/snapGraph/snapGraph.vue?d43e","webpack:///./src/views/snapGraph/snapGraph.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","directives","name","rawName","value","expression","attrs","on","$event","$$selectedVal","Array","prototype","filter","call","target","options","o","selected","map","val","_value","tool","multiple","_l","item","key","domProps","_s","label","staticRenderFns","_defineProperty","obj","Object","defineProperty","enumerable","configurable","writable","data","tools","draw","source","watch","addInteractions","methods","initMap","OSM","style","Style","fill","Fill","color","stroke","Stroke","width","image","Circle","radius","Map","layers","raster","vector","view","View","projection","center","zoom","insertVertexCondition","addInteraction","modify","removeInteraction","snap","Draw","type","Snap","mounted","component"],"mappings":"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","file":"js/chunk-2d0d3e37.9fe50e19.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vm\"},[_c('h2',{staticClass:\"h-title\"},[_vm._v(\"修改已绘制的图形\")]),_c('div',{staticClass:\"tools-x\"},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.tool),expression:\"tool\"}],attrs:{\"id\":\"type\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.tool=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.tools),function(item){return _c('option',{key:item.value,domProps:{\"value\":item.value}},[_vm._v(_vm._s(item.label))])}),0)]),_c('div',{staticClass:\"map-x\",attrs:{\"id\":\"map\"}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","<template>\r\n  <div class=\"vm\">\r\n    <h2 class=\"h-title\">修改已绘制的图形</h2>\r\n    <div class=\"tools-x\">\r\n      <select id=\"type\" v-model=\"tool\">\r\n        <option v-for=\"item in tools\" :key=\"item.value\" :value=\"item.value\">{{item.label}}</option>\r\n      </select>\r\n    </div>\r\n    <div id=\"map\" class=\"map-x\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport 'ol/ol.css'\r\nimport { Map, View } from 'ol'\r\nimport Tile from 'ol/layer/Tile'\r\nimport OSM from 'ol/source/OSM'\r\nimport LayerVector from 'ol/layer/Vector'\r\nimport SourceVector from 'ol/source/Vector'\r\nimport { Draw, Modify, Snap} from 'ol/interaction'\r\nimport { Style, Fill, Stroke, Circle } from 'ol/style'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      tool: 'Circle', // 当前选中的工具\r\n      tools: [ // 工具集\r\n        {\r\n          value: 'Point',\r\n          label: '点'\r\n        },\r\n        {\r\n          value: 'LineString',\r\n          label: '线'\r\n        },\r\n        {\r\n          value: 'Polygon',\r\n          label: '多边形'\r\n        },\r\n        {\r\n          value: 'Circle',\r\n          label: '圆'\r\n        },\r\n        {\r\n          value: 'None',\r\n          label: '无'\r\n        }\r\n      ],\r\n      map: null,\r\n      draw: null,\r\n      source: new SourceVector(),\r\n      draw: null,\r\n      snap: null\r\n    }\r\n  },\r\n  watch: {\r\n    tool(newVal) {\r\n      this.addInteractions()\r\n    }\r\n  },\r\n  methods: {\r\n    initMap() {\r\n      let raster = new Tile({\r\n        source: new OSM()\r\n      });\r\n\r\n      let vector = new LayerVector({\r\n        source: this.source,\r\n        style: new Style({\r\n          fill: new Fill({\r\n            color: 'rgba(255, 255, 255, 0.2)'\r\n          }),\r\n          stroke: new Stroke({\r\n            color: '#ffcc33',\r\n            width: 2\r\n          }),\r\n          image: new Circle({\r\n            radius: 7,\r\n            fill: new Fill({\r\n              color: '#ffcc33'\r\n            })\r\n          })\r\n        })\r\n      })\r\n\r\n      this.map = new Map({\r\n        target: 'map',\r\n        layers: [raster, vector],\r\n        view: new View({\r\n          projection: \"EPSG:4326\",\r\n          center: [115.543045,45.16871],\r\n          zoom: 10\r\n        })\r\n      })\r\n\r\n      let modify = new Modify({\r\n        source: this.source,\r\n        insertVertexCondition: () => false // 如果返回true，可以增加节点\r\n      })\r\n\r\n      this.map.addInteraction(modify)\r\n      this.addInteractions()\r\n    },\r\n    addInteractions() {\r\n      if (this.draw !== null) {\r\n        this.map.removeInteraction(this.draw)\r\n      }\r\n      if (this.snap !== null) {\r\n        this.map.removeInteraction(this.snap)\r\n      }\r\n\r\n      this.draw = new Draw({\r\n        source: this.source,\r\n        type: this.tool\r\n      })\r\n      this.map.addInteraction(this.draw)\r\n\r\n      this.snap = new Snap({source: this.source})\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initMap()\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./snapGraph.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./snapGraph.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./snapGraph.vue?vue&type=template&id=5a023e52&\"\nimport script from \"./snapGraph.vue?vue&type=script&lang=js&\"\nexport * from \"./snapGraph.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}