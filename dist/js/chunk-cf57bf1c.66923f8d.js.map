{"version":3,"sources":["webpack:///./src/assets/images/arrow.png","webpack:///./src/views/arrowLine/arrowLine.vue?687b","webpack:///src/views/arrowLine/arrowLine.vue","webpack:///./src/views/arrowLine/arrowLine.vue?a1cc","webpack:///./src/views/arrowLine/arrowLine.vue"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","ref","staticRenderFns","data","map","source","wrapX","methods","initMap","styleFunction","feature","geometry","forEachSegment","styles","push","Style","Point","image","Icon","src","anchor","rotateWithView","rotation","OSM","style","Map","target","$refs","layers","raster","vector","view","View","projection","center","zoom","addInteraction","Draw","type","mounted","component"],"mappings":"mGAAAA,EAAOC,QAAU,8iB,yCCAjB,IAAIC,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,MAAM,CAACF,EAAG,KAAK,CAACE,YAAY,WAAW,CAACN,EAAIO,GAAG,YAAYH,EAAG,MAAM,CAACI,IAAI,MAAMF,YAAY,aAC7MG,EAAkB,G,0JCiBtB,GACEC,KADF,WAEI,MAAO,CACLC,IAAK,KACLC,OAAQ,IAAI,EAAlB,MACQC,OAAO,MAIbC,QAAS,CACPC,QADJ,WAGM,SAASC,EAAcC,GACrB,IAAR,kBACA,GACA,YACU,OAAV,YACY,MAAZ,UACY,MAAZ,OAmBQ,OAdAC,EAASC,gBAAe,SAAhC,KACU,IAAV,YACA,YACA,kBACUC,EAAOC,KAAK,IAAIC,EAA1B,MACYJ,SAAU,IAAIK,EAA1B,QACYC,MAAO,IAAIC,EAAvB,MACcC,IAAK,EAAnB,QACcC,OAAQ,CAAC,IAAM,IACfC,gBAAgB,EAChBC,UAAWA,UAIVT,EAGT,IAAN,cACQR,OAAQ,IAAIkB,EAApB,OAGA,cACQlB,OAAQX,KAAKW,OACbmB,MAAOf,IAGTf,KAAKU,IAAM,IAAIqB,EAArB,MACQC,OAAQhC,KAAKiC,MAAMvB,IACnBwB,OAAQ,CAACC,EAAQC,GACjBC,KAAM,IAAIC,EAAlB,MACUC,WAAY,YACZC,OAAQ,CAAC,WAAnB,UACUC,KAAM,OAIVzC,KAAKU,IAAIgC,eAAe,IAAIC,EAAlC,MACQhC,OAAQX,KAAKW,OACbiC,KAAM,kBAKZC,QAlEF,WAmEI7C,KAAKc,YCrFyV,I,YCO9VgC,EAAY,eACd,EACAhD,EACAU,GACA,EACA,KACA,KACA,MAIa,aAAAsC,E","file":"js/chunk-cf57bf1c.66923f8d.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAATCAMAAACTKxybAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAHJQTFRF//////8A//8A/6pV/79A/8wz/9Ur/9Eu/8Q7/8wz/9It/8k2/9Eu/8o1/9Av/8o1/84x/8wz/8wz/8wz/8wz/8wz/8s0/8wz/8s0/8wz/8wz/8wz/8wz/8s0/8wz/8wz/8wz/8wz/8wz/8wz/8wz/8wzo2lg3QAAACV0Uk5TAAECAwQFBgsNDxETFhgbHUNGm6Ckqa2usrW+w8fLztLV1tnc9jtYQ+sAAABdSURBVAjXZc9HDsAwCARAp/fee+X/X8wesIQVbiMELEqVU6B0VS8tocZARGvE8Edoi1leD+0Jy+2gI2U5LXRmLLuB7pxl1dBT6N4Fzf+OnJHb5B2ZwMhmpDb+kZ9+tBQLxwwvvoMAAAAASUVORK5CYII=\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"vm\"},[_c('h2',{staticClass:\"h-title\"},[_vm._v(\"带箭头的线段\")]),_c('div',{ref:\"map\",staticClass:\"map-x\"})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"vm\">\r\n    <h2 class=\"h-title\">带箭头的线段</h2>\r\n    <div ref=\"map\" class=\"map-x\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport 'ol/ol.css'\r\nimport { Map, View } from 'ol'\r\nimport Tile from 'ol/layer/Tile'\r\nimport OSM from 'ol/source/OSM'\r\nimport LayerVector from 'ol/layer/Vector'\r\nimport SourceVector from 'ol/source/Vector'\r\nimport Draw from 'ol/interaction/Draw'\r\nimport { Style, Stroke, Icon } from 'ol/style'\r\nimport Point from 'ol/geom/Point'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      map: null,\r\n      source: new SourceVector({\r\n        wrapX: false // 禁止横向无限重复（底图渲染的时候会横向无限重复），设置了这个属性，可以让绘制的图形不跟随底图横向无限重复\r\n      })\r\n    }\r\n  },\r\n  methods: {\r\n    initMap() {\r\n\r\n      function styleFunction(feature) {\r\n        let geometry = feature.getGeometry()\r\n        let styles = [\r\n          new Style({\r\n            stroke: new Stroke({\r\n              color: '#ffcc33',\r\n              width: 2\r\n            })\r\n          })\r\n        ]\r\n\r\n        geometry.forEachSegment((start, end) => {\r\n          let dx = end[0] - start[0]\r\n          let dy = end[1] - start[1]\r\n          let rotation = Math.atan2(dy, dx)\r\n          styles.push(new Style({\r\n            geometry: new Point(end),\r\n            image: new Icon({\r\n              src: require('@/assets/images/arrow.png'),\r\n              anchor: [0.75, 0.5],\r\n              rotateWithView: true,\r\n              rotation: -rotation\r\n            })\r\n          }))\r\n        })\r\n        return styles\r\n      }\r\n\r\n      let raster = new Tile({\r\n        source: new OSM()\r\n      });\r\n\r\n      let vector = new LayerVector({\r\n        source: this.source,\r\n        style: styleFunction\r\n      });\r\n\r\n      this.map = new Map({\r\n        target: this.$refs.map,\r\n        layers: [raster, vector],\r\n        view: new View({\r\n          projection: \"EPSG:4326\",\r\n          center: [115.543045,45.16871],\r\n          zoom: 10\r\n        })\r\n      })\r\n\r\n      this.map.addInteraction(new Draw({\r\n        source: this.source,\r\n        type: 'LineString',\r\n        // freehand: true // 如果加上自由绘制哈哈哈哈哈哈\r\n      }))\r\n    }\r\n  },\r\n  mounted() {\r\n    this.initMap()\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./arrowLine.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./arrowLine.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./arrowLine.vue?vue&type=template&id=3660b13e&\"\nimport script from \"./arrowLine.vue?vue&type=script&lang=js&\"\nexport * from \"./arrowLine.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}